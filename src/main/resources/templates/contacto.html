<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{base :: head}">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>La Masseria - Contacto</title>
    
    <style>
        .floating-cart-btn {
            position: fixed;
            bottom: 120px;
            left: 30px;
            width: 70px;
            height: 70px;
            background: #c49b63;
            color: white;
            border-radius: 50%;
            text-align: center;
            font-size: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 3px solid white;
            cursor: pointer;
        }
        
        .floating-cart-btn .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 2px solid white;
        }
        
        .whatsapp-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: #25d366;
            color: white;
            border-radius: 50%;
            text-align: center;
            font-size: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 3px solid white;
        }
        
        .whatsapp-float:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.5);
            color: white;
        }
        
        .back-to-top {
            position: fixed;
            bottom: 120px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: #c49b63;
            color: white;
            border-radius: 50%;
            text-align: center;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 2px solid white;
        }
        
        .back-to-top:hover {
            background: #b38b52;
            transform: scale(1.1);
            color: white;
        }
        
        /* Estilos para mensajes de alerta */
        .alert-custom {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            min-width: 300px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border-radius: 8px;
            border-left: 5px solid;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border-left-color: #28a745;
        }
        
        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border-left-color: #dc3545;
        }
        
        .alert-warning {
            background-color: #fff3cd;
            color: #856404;
            border-left-color: #ffc107;
        }
    </style>
</head>
<body>
    <!-- Navbar (usando fragmento de base.html) -->
    <div th:replace="~{base :: navbar}"></div>

    <!-- Mensajes flotantes de éxito/error -->
    <div th:if="${param.enviado != null}" class="alert alert-success alert-custom alert-dismissible fade show" role="alert">
        <i class="fa fa-check-circle mr-2"></i>
        <span th:text="${mensajeExito} ?: '¡Mensaje enviado con éxito! Te contactaremos pronto.'"></span>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    
    <div th:if="${param.error != null}" class="alert alert-danger alert-custom alert-dismissible fade show" role="alert">
        <i class="fa fa-exclamation-circle mr-2"></i>
        <span th:text="${mensajeError} ?: 'Error al enviar el mensaje. Por favor intenta nuevamente.'"></span>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <!-- Page Header Inicio -->
    <div class="container-fluid page-header mb-5 position-relative overlay-bottom">
        <div class="d-flex flex-column align-items-center justify-content-center pt-0 pt-lg-5" style="min-height: 400px">
            <h1 class="display-4 mb-3 mt-0 mt-lg-5 text-white text-uppercase">Contáctanos</h1>
            <div class="d-inline-flex mb-lg-5">
                <p class="m-0 text-white"><a class="text-white" href="/">Inicio</a></p>
                <p class="m-0 text-white px-2">/</p>
                <p class="m-0 text-white">Contacto</p>
            </div>
        </div>
    </div>
    <!-- Page Header Fin -->

    <!-- Contacto Inicio -->
    <div class="container-fluid py-5">
        <div class="container">
            <div class="section-title text-center mb-5">
                <h4 class="text-primary text-uppercase" style="letter-spacing: 5px; color: #c49b63;">Contáctanos</h4>
                <h1 class="display-4" style="color: #333;">Hazlo Ahora</h1>
            </div>
            
            <!-- Información de contacto -->
            <div class="row mb-5">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div style="background: white; border-radius: 16px; padding: 30px 20px; box-shadow: 0 8px 25px rgba(196,155,99,0.1); border: 1px solid rgba(196,155,99,0.2); text-align: center; height: 100%;">
                        <i class="fa fa-map-marker-alt" style="font-size: 2.5rem; color: #c49b63; margin-bottom: 15px;"></i>
                        <h4 style="color: #333; font-weight: 700; margin-bottom: 15px; font-size: 1.3rem;">Dirección</h4>
                        <p style="color: #666; line-height: 1.6; margin-bottom: 0;">Av. Universitaria /Mz. V Lte 14 Sec. 2, IV etapa /Barrio 1. AGR. Pachacamac - V.E.S.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div style="background: white; border-radius: 16px; padding: 30px 20px; box-shadow: 0 8px 25px rgba(196,155,99,0.1); border: 1px solid rgba(196,155,99,0.2); text-align: center; height: 100%;">
                        <i class="fa fa-phone-alt" style="font-size: 2.5rem; color: #c49b63; margin-bottom: 15px;"></i>
                        <h4 style="color: #333; font-weight: 700; margin-bottom: 15px; font-size: 1.3rem;">Teléfono</h4>
                        <p style="color: #666; line-height: 1.6; margin-bottom: 0;"><a href="tel:+51912594051" style="color: #666; text-decoration: none;">912 594 051</a></p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div style="background: white; border-radius: 16px; padding: 30px 20px; box-shadow: 0 8px 25px rgba(196,155,99,0.1); border: 1px solid rgba(196,155,99,0.2); text-align: center; height: 100%;">
                        <i class="far fa-envelope" style="font-size: 2.5rem; color: #c49b63; margin-bottom: 15px;"></i>
                        <h4 style="color: #333; font-weight: 700; margin-bottom: 15px; font-size: 1.3rem;">Correo electrónico</h4>
                        <p style="color: #666; line-height: 1.6; margin-bottom: 0;"><a href="mailto:lamasseriaperu@gmail.com" style="color: #666; text-decoration: none;">lamasseriaperu@gmail.com</a></p>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <!-- Mapa -->
                <div class="col-lg-6 mb-5">
                    <div style="border-radius: 16px; overflow: hidden; box-shadow: 0 8px 25px rgba(196,155,99,0.15); border: 3px solid white;">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3899.1991215341213!2d-76.92329962419018!3d-12.234792845431638!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9105bbf504708c93%3A0x8b36d828a7f1645b!2sLA%20MASSER%C3%8DA%20-%20Pasteles%2C%20bocaditos%20y%20caf%C3%A9!5e0!3m2!1sen!2spe!4v1747927889521!5m2!1sen!2spe" width="100%" height="450" style="border:0; display: block;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
                
                <!-- Formulario de contacto -->
                <div class="col-lg-6 mb-5">
                    <div style="background: white; border-radius: 16px; padding: 35px; box-shadow: 0 8px 25px rgba(196,155,99,0.1); border: 1px solid rgba(196,155,99,0.2);">
                        <h3 style="color: #333; font-weight: 700; margin-bottom: 25px; font-size: 1.8rem; position: relative; padding-bottom: 15px;">Envíanos un mensaje</h3>
                        <form action="/mensaje" method="POST" th:action="@{/mensaje}">
                            <div style="margin-bottom: 20px;">
                                <input type="text" class="form-control" name="nombre" placeholder="Nombre completo" required
                                       style="width: 100%; border: 2px solid #e0d6cc; border-radius: 12px; padding: 15px 20px; font-size: 1rem; background: white; box-sizing: border-box;">
                            </div>
                            <div style="margin-bottom: 20px;">
                                <input type="email" class="form-control" name="email" placeholder="Correo electrónico" required
                                       style="width: 100%; border: 2px solid #e0d6cc; border-radius: 12px; padding: 15px 20px; font-size: 1rem; background: white; box-sizing: border-box;">
                            </div>
                            <div style="margin-bottom: 20px;">
                                <input type="text" class="form-control" name="asunto" placeholder="Asunto" required
                                       style="width: 100%; border: 2px solid #e0d6cc; border-radius: 12px; padding: 15px 20px; font-size: 1rem; background: white; box-sizing: border-box;">
                            </div>
                            <div style="margin-bottom: 20px;">
                                <textarea class="form-control" name="mensaje" rows="5" placeholder="Mensaje" required
                                          style="width: 100%; border: 2px solid #e0d6cc; border-radius: 12px; padding: 15px 20px; font-size: 1rem; background: white; box-sizing: border-box; min-height: 150px; resize: vertical;"></textarea>
                            </div>
                            <button type="submit" style="background: linear-gradient(135deg, #c49b63 0%, #b38b52 100%); color: white; border: none; border-radius: 50px; padding: 15px 40px; font-weight: 700; font-size: 1rem; text-transform: uppercase; letter-spacing: 1px; cursor: pointer; box-shadow: 0 8px 20px rgba(196,155,99,0.2); display: inline-block;">
                                <i class="fas fa-paper-plane mr-2"></i>Enviar mensaje
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Contacto Fin -->

    <!-- Footer (usando fragmento de base.html) -->
    <div th:replace="~{base :: footer}"></div>
    
    <!-- Scripts (usando fragmento de base.html) -->
    <div th:replace="~{base :: scripts}"></div>

    <!-- Script para auto-cerrar mensajes -->
    <script>
        $(document).ready(function() {
            // Auto-cerrar mensajes después de 5 segundos
            setTimeout(function() {
                $('.alert-custom').fadeOut(500, function() {
                    $(this).remove();
                });
            }, 5000);
        });
    </script>
    
    <!-- Botones flotantes -->
    <div th:replace="~{base :: floating-buttons}"></div>
</body>
</html>